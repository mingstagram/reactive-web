# 📝 Redis vs Kafka: 차이점, 사용 용도 및 선택 기준

## 1️⃣ Redis와 Kafka의 기본 개념
|           | Redis                        |                                     Kafka |
|-----------|------------------------------|------------------------------------------|
| 개념        | 인메모리 데이터 저장소                 |                           분산 메시지 스트리밍 플랫폼 |
| 주요역할      | 빠른 데이터 캐싱, 세션 저장, 실시간 데이터 처리 |                 비동기 메시지 큐, 이벤트 스트리밍, 로그처리 |
| 데이터 저장 방식 | 키-값(Key-Value) 저장소           |                             로그 기반 메시징 시스템 |
| 지속성       | 기본적으로 In-Memory (디스크 저장 가능)  |                   기본적으로 디스크 저장 (로그 파일 유지) |
| 처리 속도     | 매우 빠름 (메모리 기반)                 |              대량의 데이터를 처리 가능하지만 Redis보다 느림 |

* * *

## 2️⃣ Redis와 Kafka의 사용 용도
### ✅ Redis를 사용하는 경우
#### Redis는 빠른 데이터 접근과 캐싱이 필요한 경우 사용됩니다.
#### 📌 주요 활용 사례:
1. 캐싱 → 자주 조회되는 데이터를 저장하여 DB 부하 감소
2. 세션 저장 → 로그인 세션, 인증 토큰 관리
3. 실시간 순위(Leaderboard) 관리 → 점수 기반 정렬이 필요한 게임 랭킹 시스템
4. Pub/Sub 메시징 → 간단한 실시간 알림 기능 (ex: 채팅 메시지 브로드캐스트)

#### 🔹 Redis 예제 (캐싱 사용)
```java
@Cacheable(value = "userCache", key = "#userId")
public User getUserById(String userId) {
    return userRepository.findById(userId).orElseThrow();
}
```

* * *

### ✅ Kafka를 사용하는 경우
#### Kafka는 대량의 메시지를 처리하고 이벤트 스트리밍이 필요한 경우 사용됩니다.
#### 📌 주요 활용 사례:
1. 비동기 이벤트 처리 → 마이크로서비스 간 비동기 데이터 연동
2. 로그 데이터 수집 및 분석 → 서버 로그, 트랜잭션 로그 처리
3. 데이터 스트리밍 → 실시간 데이터 분석 및 처리 (예: 실시간 추천 시스템)
4. 대량의 메시지 큐 → 높은 트래픽을 가진 서비스에서 메시지 브로커 역할

#### 🔹 Kafka 예제 (메시지 전송 & 수신)
#### Producer (메시지 전송)
```
kafkaTemplate.send("user-topic", "User login event");
```
#### Producer (메시지 전송)
```java
@KafkaListener(topics = "user-topic", groupId = "group_id")
public void listen(String message) {
    System.out.println("📩 Kafka 메시지 수신: " + message);
}
```

* * *

## 어느 상황에서 Redis와 Kafka를 선택해야 할까?
| 상황        | Redis가 적합                    | Kafka가 적합       |
|-----------|------------------------------|--------------------|
| 실시간 데이터 캐싱        | ✅                 | ❌               | 
| 대량의 로그 수집 및 분석        | ❌                 | ✅               |  
| 빠른 키-값 저장 및 조회        | ✅                | ❌               |  
| 이벤트 기반 아키텍처        | ❌             | ✅               |  
| 마이크로서비스 간 메시지 전달        |	❌         | ✅               |  
| 실시간 알림(Pub/Sub)        | ✅ (단순한 경우)              | ✅ (대량의 데이터) |  
| 데이터 영속성(저장 필요 여부)        | ❌ (기본적으로 휘발성)               | ✅ (디스크 저장) |  
| 고속 처리 (ms 단위)        | ✅                | 분❌ (비교적 느림) | 

#### ✅ 결론
* `Redis` → 빠른 응답 속도가 필요하고 휘발성 데이터(캐싱, 세션)를 다룰 때
* `Kafka` → 대량의 데이터를 비동기적으로 처리하고, 이벤트 스트리밍이 필요할 때

#### 📌 만약 둘 다 필요한 경우?
Kafka로 데이터를 받아서 Redis에 저장 후 캐싱하는 하이브리드 방식도 가능
